<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Pair Chat Product Teardown - How AI is transforming Singapore Government work">
    <meta name="theme-color" content="#0f1419">
    <title>Pair Chat Teardown | How AI Changed Government Work</title>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    
    <style id="inline-styles">
        /* ===========================================
           OGP DESIGN TOKENS (Light & Dark Mode)
           =========================================== */
        :root {
            /* Dark Theme (Default - matches Pair) */
            --color-bg-primary: #0f1419;
            --color-bg-secondary: #1a1f28;
            --color-bg-tertiary: #262d38;
            --color-bg-interactive: #3a4452;
            
            --color-text-primary: #f5f7fa;
            --color-text-secondary: #c8d1dc;
            --color-text-muted: #8b95a5;
            
            --color-border-default: #2f3a48;
            --color-border-hover: #3a4452;
            
            --color-accent-primary: #4a90ff;
            --color-accent-hover: #357ae8;
            --color-accent-secondary: #10b981;
            
            /* Typography */
            --font-family-sans: 'Inter', sans-serif;
            --font-family-mono: 'JetBrains Mono', monospace;
            
            --font-size-xs: 1rem;
            --font-size-sm: 1.125rem;
            --font-size-base: 1.25rem;
            --font-size-lg: 1.375rem;
            --font-size-xl: 2rem;
            --font-size-2xl: 2.75rem;
            --font-size-3xl: 3.25rem;
            --font-size-4xl: 3.75rem;
            
            --font-weight-light: 300;
            --font-weight-regular: 400;
            --font-weight-medium: 500;
            --font-weight-semibold: 600;
            --font-weight-bold: 700;
            
            --line-height-tight: 1.2;
            --line-height-normal: 1.6;
            --line-height-relaxed: 1.75;
            
            /* Spacing */
            --spacing-xs: 0.5rem;
            --spacing-sm: 1rem;
            --spacing-md: 1.5rem;
            --spacing-lg: 2rem;
            --spacing-xl: 3rem;
            --spacing-2xl: 4rem;
            
            /* Borders */
            --radius-sm: 6px;
            --radius-md: 12px;
            --radius-lg: 16px;
            
            /* Shadows */
            --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.3);
            --shadow-md: 0 8px 24px rgba(0, 0, 0, 0.4);
            --shadow-lg: 0 16px 40px rgba(0, 0, 0, 0.5);
            
            /* Transitions */
            --transition-fast: 150ms cubic-bezier(0.2, 0, 0.38, 0.9);
            --transition-normal: 300ms cubic-bezier(0.2, 0, 0.38, 0.9);
            --transition-slow: 500ms cubic-bezier(0.2, 0, 0.38, 0.9);
        }
        
        /* Light Mode */
        html[data-theme="light"] {
            --color-bg-primary: #ffffff;
            --color-bg-secondary: #f8f9fa;
            --color-bg-tertiary: #f1f3f5;
            --color-bg-interactive: #e9ecef;
            
            --color-text-primary: #1a1d20;
            --color-text-secondary: #495057;
            --color-text-muted: #6c757d;
            
            --color-border-default: #dee2e6;
            --color-border-hover: #adb5bd;
            
            --color-accent-primary: #0066ff;
            --color-accent-hover: #0052cc;
            --color-accent-secondary: #00b84a;
            
            --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.08);
            --shadow-md: 0 8px 24px rgba(0, 0, 0, 0.12);
            --shadow-lg: 0 16px 40px rgba(0, 0, 0, 0.16);
        }
        
        /* ===========================================
           RESET & BASE STYLES
           =========================================== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        html {
            scroll-behavior: smooth;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        body {
            font-family: var(--font-family-sans);
            background-color: var(--color-bg-primary);
            color: var(--color-text-primary);
            line-height: var(--line-height-normal);
        }
        
        /* ===========================================
           TYPOGRAPHY
           =========================================== */
        h1, h2, h3, h4, h5, h6 {
            font-weight: var(--font-weight-bold);
            line-height: var(--line-height-tight);
            margin-bottom: var(--spacing-md);
        }
        
        h1 {
            font-size: clamp(2.5rem, 5vw, var(--font-size-4xl));
            letter-spacing: -0.02em;
        }
        
        h2 {
            font-size: var(--font-size-3xl);
            letter-spacing: -0.01em;
        }
        
        h3 {
            font-size: var(--font-size-2xl);
        }
        
        h4 {
            font-size: var(--font-size-lg);
        }
        
        p {
            margin-bottom: var(--spacing-md);
            color: var(--color-text-secondary);
            font-size: var(--font-size-sm);
        }
        
        p.eyebrow {
            font-size: var(--font-size-xs);
            font-weight: var(--font-weight-semibold);
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: var(--color-accent-primary);
            margin-bottom: var(--spacing-sm);
        }
        
        a {
            color: var(--color-accent-primary);
            text-decoration: none;
            transition: color var(--transition-fast);
        }
        
        a:hover {
            color: var(--color-accent-hover);
        }
        
        /* ===========================================
           LAYOUT
           =========================================== */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 var(--spacing-lg);
        }
        
        section {
            padding: var(--spacing-2xl) 0;
        }
        
        /* ===========================================
           HEADER & NAVIGATION
           =========================================== */
        header {
            position: sticky;
            top: 0;
            z-index: 100;
            background: var(--color-bg-primary);
            border-bottom: 1px solid var(--color-border-default);
            backdrop-filter: blur(10px);
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: var(--spacing-md) 0;
        }
        
        .logo {
            font-size: var(--font-size-lg);
            font-weight: var(--font-weight-bold);
            color: var(--color-text-primary);
        }
        
        .nav-links {
            display: flex;
            gap: var(--spacing-lg);
            align-items: center;
        }
        
        .nav-links a {
            font-size: var(--font-size-sm);
            color: var(--color-text-secondary);
            transition: color var(--transition-fast);
        }
        
        .nav-links a:hover {
            color: var(--color-text-primary);
        }
        
        .theme-toggle {
            background: var(--color-bg-tertiary);
            border: 1px solid var(--color-border-default);
            color: var(--color-text-primary);
            padding: var(--spacing-xs) var(--spacing-sm);
            border-radius: var(--radius-sm);
            cursor: pointer;
            transition: all var(--transition-fast);
            font-size: var(--font-size-base);
        }
        
        .theme-toggle:hover {
            background: var(--color-bg-interactive);
            border-color: var(--color-border-hover);
        }
        
        /* ===========================================
           HERO SECTION
           =========================================== */
        .hero {
            padding: var(--spacing-2xl) 0 var(--spacing-xl);
            background: linear-gradient(135deg, var(--color-bg-primary) 0%, var(--color-bg-secondary) 100%);
            min-height: 70vh;
            display: flex;
            align-items: center;
            position: relative;
            overflow: hidden;
        }
        
        .hero::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -10%;
            width: 600px;
            height: 600px;
            background: radial-gradient(circle, rgba(74, 144, 255, 0.1) 0%, transparent 70%);
            border-radius: 50%;
            pointer-events: none;
        }
        
        .hero-content {
            position: relative;
            z-index: 1;
            max-width: 700px;
        }
        
        .hero h1 {
            margin-bottom: var(--spacing-md);
            background: linear-gradient(135deg, var(--color-text-primary) 0%, var(--color-text-secondary) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .hero-subtitle {
            font-size: var(--font-size-xl);
            color: var(--color-text-secondary);
            margin-bottom: var(--spacing-lg);
            line-height: var(--line-height-relaxed);
        }
        
        .hero-nav {
            margin-top: var(--spacing-xl);
            padding-top: var(--spacing-lg);
            border-top: 1px solid var(--color-border-default);
        }
        
        .hero-nav p {
            font-size: var(--font-size-xs);
            color: var(--color-text-muted);
            margin-bottom: var(--spacing-sm);
        }
        
        .hero-nav-links {
            display: flex;
            gap: var(--spacing-md);
            flex-wrap: wrap;
        }
        
        .hero-nav-link {
            font-size: var(--font-size-xs);
            color: var(--color-text-secondary);
            text-decoration: underline;
            transition: color var(--transition-fast);
            cursor: pointer;
        }
        
        .hero-nav-link:hover {
            color: var(--color-accent-primary);
        }
        
        .cta-button {
            display: inline-block;
            padding: var(--spacing-md) var(--spacing-lg);
            background: var(--color-accent-primary);
            color: white;
            border-radius: var(--radius-md);
            font-weight: var(--font-weight-semibold);
            transition: all var(--transition-fast);
            border: 2px solid var(--color-accent-primary);
            cursor: pointer;
            font-size: var(--font-size-sm);
        }
        
        .cta-button:hover {
            background: var(--color-accent-hover);
            border-color: var(--color-accent-hover);
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }
        
        .cta-button.secondary {
            background: transparent;
            color: var(--color-accent-primary);
            border: 2px solid var(--color-accent-primary);
        }
        
        .cta-button.secondary:hover {
            background: var(--color-bg-interactive);
            color: var(--color-accent-hover);
            border-color: var(--color-accent-hover);
        }
        
        .cta-button.secondary:active {
            transform: translateY(1px);
        }
        
        /* ===========================================
           STAT CARDS
           =========================================== */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: var(--spacing-lg);
            margin: var(--spacing-xl) 0;
        }
        
        .stat-card {
            background: var(--color-bg-secondary);
            border: 1px solid var(--color-border-default);
            border-radius: var(--radius-lg);
            padding: var(--spacing-lg);
            transition: all var(--transition-normal);
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }
        
        .stat-card:hover {
            border-color: var(--color-accent-primary);
            box-shadow: var(--shadow-md);
            transform: translateY(-4px);
        }
        
        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--color-accent-primary), var(--color-accent-secondary));
        }
        
        .stat-value {
            font-size: clamp(2.5rem, 4vw, 3.75rem);
            font-weight: var(--font-weight-bold);
            color: var(--color-accent-primary);
            line-height: 1;
            margin-bottom: var(--spacing-sm);
        }
        
        .stat-label {
            font-size: var(--font-size-sm);
            color: var(--color-text-secondary);
            font-weight: var(--font-weight-medium);
        }
        
        .stat-description {
            font-size: var(--font-size-xs);
            color: var(--color-text-muted);
            margin-top: var(--spacing-sm);
        }
        
        /* ===========================================
           FEATURE CARDS
           =========================================== */
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: var(--spacing-lg);
            margin: var(--spacing-xl) 0;
        }
        
        .feature-card {
            background: var(--color-bg-secondary);
            border: 1px solid var(--color-border-default);
            border-radius: var(--radius-lg);
            padding: var(--spacing-lg);
            transition: all var(--transition-normal);
        }
        
        .feature-card:hover {
            border-color: var(--color-accent-primary);
            box-shadow: var(--shadow-md);
        }
        
        .feature-icon {
            width: 48px;
            height: 48px;
            background: var(--color-bg-tertiary);
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.75rem;
            margin-bottom: var(--spacing-md);
        }
        
        .feature-card h3 {
            margin-bottom: var(--spacing-sm);
        }
        
        /* ===========================================
           RESPONSIVE
           =========================================== */
        @media (max-width: 768px) {
            .nav-links {
                gap: var(--spacing-md);
            }
            
            section {
                padding: var(--spacing-xl) 0;
            }
            
            .hero {
                min-height: 50vh;
                padding: var(--spacing-xl) 0 var(--spacing-lg);
            }
            
            .hero::before {
                width: 300px;
                height: 300px;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .feature-grid {
                grid-template-columns: 1fr;
            }
        }
        
        /* ===========================================
           ANIMATIONS
           =========================================== */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes countUp {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }
        
        .hero-content {
            animation: fadeInUp 0.6s ease-out;
        }
        
        /* Reduce motion support */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.01ms !important;
                transition-duration: 0.01ms !important;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">Pair Chat</div>
                <nav class="nav-links">
                    <a href="#problem">Problem</a>
                    <a href="#solution">Solution</a>
                    <a href="#impact">Impact</a>
                    <button class="theme-toggle" id="theme-toggle" aria-label="Toggle theme">üåô</button>
                </nav>
            </div>
        </div>
    </header>
    
    <main>
        <!-- HERO SECTION -->
        <section class="hero" id="hero">
            <div class="container">
                <div class="hero-content">
                    <p class="eyebrow">Product Teardown</p>
                    <h1>Why 78,500 Officers Choose Pair Chat Over ChatGPT</h1>
                    <p class="hero-subtitle">
                        Singapore built an AI assistant for government work that's secure, free, and actually adopted at scale. Here's the strategic analysis of what works‚Äîand what's next to unlock the remaining 81,500 officers.
                    </p>
                    <button class="cta-button" onclick="document.getElementById('problem').scrollIntoView({behavior: 'smooth'})" style="margin-top: var(--spacing-lg);">
                        Dive Into the Analysis
                    </button>
                    
                    <div class="hero-nav">
                        <p>Quick sections:</p>
                        <div class="hero-nav-links">
                            <a href="#problem" class="hero-nav-link">Problem</a>
                            <a href="#solution" class="hero-nav-link">Solution</a>
                            <a href="#impact" class="hero-nav-link">Impact</a>
                            <a href="#adoption" class="hero-nav-link">Gap Analysis</a>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- PROBLEM SECTION -->
        <section id="problem">
            <div class="container">
                <p class="eyebrow">The Problem</p>
                <h2>Government Work Was Slow</h2>
                <p>
                    Before Pair Chat, Singapore's public officers faced a challenge: they needed AI tools to work faster, but couldn't use consumer ChatGPT because of security concerns. Their sensitive government data couldn't leave the country or be logged by AI companies.
                </p>
                
                <h3>The Real Friction Points</h3>
                <div class="feature-grid">
                    <div class="feature-card">
                        <div class="feature-icon">üìÑ</div>
                        <h4>Manual Document Writing</h4>
                        <p>Officers spent hours drafting memos, reports, and emails from scratch.</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">üîç</div>
                        <h4>Research & Analysis</h4>
                        <p>Finding patterns in data required manual review of hundreds of documents.</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">üîí</div>
                        <h4>Security Restrictions</h4>
                        <p>They couldn't use public AI tools with classified or sensitive data.</p>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- SOLUTION SECTION -->
        <section id="solution" style="background: var(--color-bg-secondary);">
            <div class="container">
                <p class="eyebrow">The Solution</p>
                <h2>Pair Chat: AI Built for Government</h2>
                <p>
                    OGP built Pair Chat in-house to solve this problem. It's like ChatGPT, but secure, free, and customized for Singapore Government workflows.
                </p>
                
                <h3>4 Core Features</h3>
                <div class="feature-grid">
                    <div class="feature-card">
                        <div class="feature-icon">üí¨</div>
                        <h4>Chat</h4>
                        <p class="eyebrow" style="margin-bottom: var(--spacing-xs);">Like ChatGPT</p>
                        <p>Start a conversation for any writing, analysis, or coding task.</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">ü§ñ</div>
                        <h4>Assistants</h4>
                        <p class="eyebrow" style="margin-bottom: var(--spacing-xs);">Automation</p>
                        <p>Create reusable AI helpers for repetitive tasks your team does daily.</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">‚ö°</div>
                        <h4>Batch Jobs</h4>
                        <p class="eyebrow" style="margin-bottom: var(--spacing-xs);">Bulk Processing</p>
                        <p>Process thousands of items at once instead of one at a time.</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">üìù</div>
                        <h4>Templates</h4>
                        <p class="eyebrow" style="margin-bottom: var(--spacing-xs);">Pre-built Formats</p>
                        <p>Pre-formatted templates for government documents (memos, briefs, etc).</p>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- IMPACT SECTION -->
        <section id="impact">
            <div class="container">
                <p class="eyebrow">The Impact</p>
                <h2>The Numbers That Matter</h2>
                <p>
                    Pair Chat isn't just popular‚Äîit's creating real value for Singapore's government.
                </p>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value">78.5K</div>
                        <div class="stat-label">Active Monthly Users (Q3 2025)</div>
                        <div class="stat-description">Nearly 1 in 2 public officers in Singapore</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">59 min</div>
                        <div class="stat-label">Saved Per Task</div>
                        <div class="stat-description">Average time saved on each task officers complete</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">$28.9M</div>
                        <div class="stat-label">Estimated Monthly Savings</div>
                        <div class="stat-description">Value created for the government</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">$123</div>
                        <div class="stat-label">Value Per Dollar Spent</div>
                        <div class="stat-description">For every $1 invested, creates $123 in savings</div>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- ADOPTION FUNNEL SECTION -->
        <section id="adoption" style="background: var(--color-bg-secondary);">
            <div class="container">
                <p class="eyebrow">The Opportunity</p>
                <h2>The Activation Gap</h2>
                <p>
                    Pair Chat reaches 78,500 officers, but the real story is the 81,500 who haven't adopted yet. Understanding this gap reveals the next frontier for growth.
                </p>
                
                <!-- Funnel Visualization with Scroll Animation -->
                <div id="funnel-container" style="margin: var(--spacing-xl) 0; display: flex; justify-content: center; position: relative; min-height: 600px;">
                    <svg id="adoption-funnel" viewBox="0 0 600 500" style="max-width: 100%; height: auto; max-height: 500px; position: sticky; top: 100px;">
                        <!-- Background -->
                        <defs>
                            <linearGradient id="grad1" x1="0%" y1="0%" x2="100%" y2="0%">
                                <stop offset="0%" style="stop-color:var(--color-accent-primary);stop-opacity:0.15" />
                                <stop offset="100%" style="stop-color:var(--color-accent-secondary);stop-opacity:0.15" />
                            </linearGradient>
                        </defs>
                        
                        <!-- Stage 1: Eligible Officers -->
                        <g id="stage-1">
                            <polygon id="stage-1-poly" points="100,50 500,50 480,120 120,120" fill="var(--color-accent-primary)" opacity="0.2" stroke="var(--color-accent-primary)" stroke-width="2"/>
                            <text x="300" y="95" text-anchor="middle" font-size="24" font-weight="bold" fill="var(--color-text-primary)">160,000</text>
                            <text x="300" y="135" text-anchor="middle" font-size="14" fill="var(--color-text-secondary)">Eligible Officers</text>
                        </g>
                        
                        <!-- Arrow Down -->
                        <line x1="300" y1="140" x2="300" y2="170" stroke="var(--color-border-default)" stroke-width="2" marker-end="url(#arrowhead)"/>
                        <defs>
                            <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="5" refY="5" orient="auto">
                                <polygon points="0 0, 10 5, 0 10" fill="var(--color-border-default)" />
                            </marker>
                        </defs>
                        
                        <!-- Stage 2: Active Users -->
                        <g id="stage-2">
                            <polygon id="stage-2-poly" points="130,180 470,180 430,280 170,280" fill="var(--color-accent-primary)" opacity="0.4" stroke="var(--color-accent-primary)" stroke-width="2"/>
                            <text x="300" y="245" text-anchor="middle" font-size="24" font-weight="bold" fill="var(--color-text-primary)">78,500</text>
                            <text x="300" y="285" text-anchor="middle" font-size="14" fill="var(--color-text-secondary)">Monthly Active Users</text>
                        </g>
                        
                        <!-- Gap Highlight -->
                        <g id="gap-highlight">
                            <rect id="gap-rect" x="100" y="310" width="400" height="120" fill="var(--color-accent-secondary)" opacity="0.15" rx="8"/>
                            <text x="300" y="340" text-anchor="middle" font-size="20" font-weight="bold" fill="var(--color-accent-secondary)">THE GAP</text>
                            <text id="gap-number" x="300" y="368" text-anchor="middle" font-size="28" font-weight="bold" fill="var(--color-text-primary)">81,500</text>
                            <text id="gap-label" x="300" y="395" text-anchor="middle" font-size="14" fill="var(--color-text-secondary)">Untapped Officers (51% of eligible)</text>
                        </g>
                        
                        <!-- Bottom annotation -->
                        <text x="300" y="460" text-anchor="middle" font-size="12" fill="var(--color-text-muted)">Q3 2025 Data | Source: Pair Reports</text>
                    </svg>
                </div>
                
                <!-- Gap Analysis Cards -->
                <h3 style="margin-top: var(--spacing-xl);">Why The Gap Exists</h3>
                <div class="feature-grid">
                    <div class="feature-card">
                        <div class="feature-icon">üîê</div>
                        <h4>Trust & Security Skepticism</h4>
                        <p>Despite secure positioning, officers worry: "Is this really safe?" "What happens to my data?" Perception lags reality.</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">üì±</div>
                        <h4>Device & Network Constraints</h4>
                        <p>Only compatible with non-SE GSIBs and GOMAX iPads. Restricted access = restricted adoption. Officers on other devices are blocked.</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">üéì</div>
                        <h4>Lack of Onboarding & Use Cases</h4>
                        <p>No clear "here's how this saves YOUR time" messaging. Officers don't know what Pair Chat can do for their specific role.</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">üîå</div>
                        <h4>Workflow Integration Friction</h4>
                        <p>Outputs still need rework. Pair Chat feels like "nice-to-have" instead of "must-have" tool in daily workflows.</p>
                    </div>
                </div>
            </div>
        </section>
    </main>
    
    <script>
        // Theme Toggle
        const ThemeManager = (() => {
            const STORAGE_KEY = 'pair-teardown-theme';
            const LIGHT_THEME = 'light';
            const DARK_THEME = 'dark';
            
            const getTheme = () => {
                const stored = localStorage.getItem(STORAGE_KEY);
                if (stored) return stored;
                
                if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
                    return DARK_THEME;
                }
                return LIGHT_THEME;
            };
            
            const setTheme = (theme) => {
                const html = document.documentElement;
                html.setAttribute('data-theme', theme);
                localStorage.setItem(STORAGE_KEY, theme);
                updateToggleIcon(theme);
            };
            
            const updateToggleIcon = (theme) => {
                const btn = document.getElementById('theme-toggle');
                if (btn) {
                    btn.textContent = theme === DARK_THEME ? '‚òÄÔ∏è' : 'üåô';
                }
            };
            
            const toggle = () => {
                const current = localStorage.getItem(STORAGE_KEY) || getTheme();
                const next = current === LIGHT_THEME ? DARK_THEME : LIGHT_THEME;
                setTheme(next);
            };
            
            const init = () => {
                const theme = getTheme();
                setTheme(theme);
                
                window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (e) => {
                    if (!localStorage.getItem(STORAGE_KEY)) {
                        setTheme(e.matches ? DARK_THEME : LIGHT_THEME);
                    }
                });
                
                const btn = document.getElementById('theme-toggle');
                if (btn) {
                    btn.addEventListener('click', toggle);
                }
            };
            
            return { init };
        })();
        
        // Initialize
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', ThemeManager.init);
        } else {
            ThemeManager.init();
        }
        
        // Funnel Scroll Animation
        const FunnelAnimation = (() => {
            const stage1Poly = document.getElementById('stage-1-poly');
            const stage2Poly = document.getElementById('stage-2-poly');
            const gapRect = document.getElementById('gap-rect');
            const gapNumber = document.getElementById('gap-number');
            const gapLabel = document.getElementById('gap-label');
            const funnelContainer = document.getElementById('funnel-container');
            
            if (!funnelContainer) return;
            
            const init = () => {
                window.addEventListener('scroll', animateFunnel);
            };
            
            const animateFunnel = () => {
                const rect = funnelContainer.getBoundingClientRect();
                const windowHeight = window.innerHeight;
                
                // Calculate scroll progress (0 to 1)
                // 0 = funnel at bottom of screen, 1 = funnel at top of screen
                const progress = Math.max(0, Math.min(1, 
                    (windowHeight - rect.top) / (windowHeight + rect.height)
                ));
                
                // Stage 1: Narrows from "100,50 500,50 480,120 120,120" to "200,50 400,50 380,120 220,120"
                const stage1Start = "100,50 500,50 480,120 120,120";
                const stage1End = "200,50 400,50 380,120 220,120";
                stage1Poly.setAttribute('points', interpolatePoints(stage1Start, stage1End, progress));
                
                // Stage 2: Narrows from "130,180 470,180 430,280 170,280" to "250,180 350,180 330,280 270,280"
                const stage2Start = "130,180 470,180 430,280 170,280";
                const stage2End = "250,180 350,180 330,280 270,280";
                stage2Poly.setAttribute('points', interpolatePoints(stage2Start, stage2End, progress));
                
                // Gap: Shrinks from x=100 width=400 to x=180 width=240
                const gapX = 100 + (80 * progress);
                const gapWidth = 400 - (160 * progress);
                gapRect.setAttribute('x', gapX);
                gapRect.setAttribute('width', gapWidth);
                
                // Gap number opacity and scale
                const gapOpacity = Math.max(0.5, 1 - (progress * 0.3));
                gapNumber.setAttribute('opacity', gapOpacity);
                gapLabel.setAttribute('opacity', gapOpacity);
                
                // Optional: fade out stages as gap closes
                stage1Poly.setAttribute('opacity', Math.max(0.1, 0.2 - (progress * 0.15)));
                stage2Poly.setAttribute('opacity', Math.max(0.2, 0.4 - (progress * 0.25)));
            };
            
            const interpolatePoints = (startStr, endStr, progress) => {
                const startPoints = startStr.split(' ').map(p => parseFloat(p));
                const endPoints = endStr.split(' ').map(p => parseFloat(p));
                
                const interpolated = startPoints.map((start, i) => {
                    const end = endPoints[i];
                    return start + (end - start) * progress;
                });
                
                return interpolated.map((p, i) => i % 2 === 0 ? p : p).join(' ');
            };
            
            return { init };
        })();
        
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', FunnelAnimation.init);
        } else {
            FunnelAnimation.init();
        }
    </script>
</body>
</html>
